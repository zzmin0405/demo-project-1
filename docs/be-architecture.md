# êµ¬ì¡°

---
**ê°œì„ ì‚¬í•­ ë° ë³´ì™„ì  (í’€ìŠ¤íƒ ê°œë°œì ê´€ì )**

í˜„ì¬ í”„ë¡œì íŠ¸ëŠ” `pnpm` ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¥¼ í™œìš©í•œ ëª¨ë…¸ë ˆí¬ êµ¬ì¡°ë¡œ `api` (NestJS)ì™€ `web` (Next.js) ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì˜ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” í™•ì¥ì„±ê³¼ ê´€ë¦¬ ìš©ì´ì„± ì¸¡ë©´ì—ì„œ ì¢‹ì€ ì‹œì‘ì ì…ë‹ˆë‹¤. ë‹¤ìŒì€ í”„ë¡œì íŠ¸ì˜ ê²¬ê³ í•¨ê³¼ ê°œë°œ íš¨ìœ¨ì„±ì„ ë”ìš± ë†’ì´ê¸° ìœ„í•œ ê°œì„  ë° ë³´ì™„ ì‚¬í•­ì…ë‹ˆë‹¤.

### 1. ëª¨ë…¸ë ˆí¬ ê³µí†µ íŒ¨í‚¤ì§€ í™œìš© ê·¹ëŒ€í™”

í˜„ì¬ `api`ì™€ `web` ê°„ì— ê³µìœ ë  ìˆ˜ ìˆëŠ” ì½”ë“œ(ì˜ˆ: íƒ€ì… ì •ì˜, ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜, UI ì»´í¬ë„ŒíŠ¸)ê°€ ê°œë³„ ì•± ë‚´ì— ì¤‘ë³µë˜ê±°ë‚˜ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬ë  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.

*   **`packages/shared-types` ë˜ëŠ” `packages/common` ìƒì„±:**
    *   `api`ì™€ `web` ì• í”Œë¦¬ì¼€ì´ì…˜ ê°„ì— ê³µìœ ë˜ëŠ” TypeScript íƒ€ì… ì •ì˜ (ì¸í„°í˜ì´ìŠ¤, DTOs), Enum, ìƒìˆ˜ ë“±ì„ ì´ íŒ¨í‚¤ì§€ì— ëª¨ì•„ ê´€ë¦¬í•©ë‹ˆë‹¤.
    *   ì´ë¥¼ í†µí•´ íƒ€ì… ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ê³ , ì½”ë“œì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ API ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆë‚˜ WebSocket ì´ë²¤íŠ¸ í˜ì´ë¡œë“œ ë“±ì— ìœ ìš©í•©ë‹ˆë‹¤.
*   **`packages/config` (ì„ íƒ ì‚¬í•­):**
    *   ê³µí†µ `tsconfig.json`, `eslint.config.mjs`, `prettierrc` ë“±ì„ ì •ì˜í•˜ì—¬ ëª¨ë“  ì›Œí¬ìŠ¤í˜ì´ìŠ¤ íŒ¨í‚¤ì§€ì— ì¼ê´€ëœ ê°œë°œ í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.

### 2. ë°±ì—”ë“œ (NestJS - `ai-meet/apps/api`) ê°œì„  ì‚¬í•­

NestJSëŠ” ê°•ë ¥í•œ í”„ë ˆì„ì›Œí¬ì´ë¯€ë¡œ, ê·¸ ê¸°ëŠ¥ì„ ìµœëŒ€í•œ í™œìš©í•˜ì—¬ ê²¬ê³ í•œ APIë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

*   **í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬:**
    *   `@nestjs/config` ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ `.env` íŒŒì¼ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³ , í™˜ê²½ ë³€ìˆ˜ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. `process.env`ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ì•ˆì „í•˜ê³  ê´€ë¦¬í•˜ê¸° ìš©ì´í•©ë‹ˆë‹¤.
*   **ë°ì´í„°ë² ì´ìŠ¤ í†µí•©:**
    *   í˜„ì¬ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ëª¨ë“ˆì´ ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤. TypeORM, Prisma, Mongoose ë“± ORM/ODMì„ ì„ íƒí•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë° ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•˜ê³ , ê´€ë ¨ ëª¨ë“ˆ(ì˜ˆ: `DatabaseModule`, `UserModule`, `MeetingModule`)ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
    *   ë§ˆì´ê·¸ë ˆì´ì…˜ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì´ë ¥ì„ ê´€ë¦¬í•˜ê³  ë°°í¬ ì‹œ ìë™ ì ìš©ë˜ë„ë¡ í•©ë‹ˆë‹¤.
*   **ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬ (Validation):**
    *   `class-validator`ì™€ `class-transformer`ë¥¼ DTO(Data Transfer Object)ì— ì ìš©í•˜ì—¬ API ìš”ì²­ ë°ì´í„°ì— ëŒ€í•œ ê°•ë ¥í•œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. ì „ì—­ `ValidationPipe`ë¥¼ ì„¤ì •í•˜ì—¬ ëª¨ë“  ìš”ì²­ì— ìë™ìœ¼ë¡œ ì ìš©ë˜ë„ë¡ í•©ë‹ˆë‹¤.
*   **êµ¬ì¡°í™”ëœ ë¡œê¹…:**
    *   `console.log` ëŒ€ì‹  Winston, Pino ë“± ì „ë¬¸ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì¡°í™”ëœ ë¡œê¹…ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ì´ëŠ” ìš´ì˜ í™˜ê²½ì—ì„œ ë¡œê·¸ ë¶„ì„ ë° ë¬¸ì œ í•´ê²°ì— í•„ìˆ˜ì ì…ë‹ˆë‹¤.
    *   ë¡œê·¸ ë ˆë²¨(debug, info, warn, error)ì„ êµ¬ë¶„í•˜ì—¬ ê´€ë¦¬í•©ë‹ˆë‹¤.
*   **API ë¬¸ì„œí™”:**
    *   `@nestjs/swagger` ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ OpenAPI (Swagger) ë¬¸ì„œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤. ì´ëŠ” í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ë° ë‹¤ë¥¸ íŒ€ì›ë“¤ê³¼ì˜ API ëª…ì„¸ ê³µìœ ì— ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤.
*   **í—¬ìŠ¤ ì²´í¬ ì—”ë“œí¬ì¸íŠ¸:**
    *   `/health`ì™€ ê°™ì€ í—¬ìŠ¤ ì²´í¬ ì—”ë“œí¬ì¸íŠ¸ë¥¼ êµ¬í˜„í•˜ì—¬ ì„œë¹„ìŠ¤ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì— ë…¸ì¶œí•©ë‹ˆë‹¤.

### 3. í”„ë¡ íŠ¸ì—”ë“œ (Next.js - `ai-meet/apps/web`) ê°œì„  ì‚¬í•­

Next.jsì˜ App Routerì™€ Reactì˜ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ê³¼ ê°œë°œ íš¨ìœ¨ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

*   **ìƒíƒœ ê´€ë¦¬ ì „ëµ:**
    *   ë³µì¡í•œ ë¯¸íŒ… ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš°, `useState`ì™€ `useContext`ë§Œìœ¼ë¡œëŠ” ì „ì—­ ìƒíƒœ ê´€ë¦¬ê°€ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Zustand, Jotai, Recoil ë˜ëŠ” Redux Toolkitê³¼ ê°™ì€ ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³µì¡í•œ ìƒíƒœë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.
*   **ë°ì´í„° í˜ì¹­ ë° ìºì‹±:**
    *   `react-query` (TanStack Query) ë˜ëŠ” `SWR`ê³¼ ê°™ì€ ë°ì´í„° í˜ì¹­ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°±ì—”ë“œ APIì™€ì˜ í†µì‹ ì„ ì¶”ìƒí™”í•˜ê³ , ìºì‹±, ì¬ì‹œë„, ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸ ë“±ì˜ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•˜ê³  ê°œë°œ ë³µì¡ì„±ì„ ì¤„ì…ë‹ˆë‹¤.
*   **ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°í™”:**
    *   `components/` ë””ë ‰í† ë¦¬ ë‚´ì—ì„œ `components/ui/` ì™¸ì— ê¸°ëŠ¥ë³„ ë˜ëŠ” ë„ë©”ì¸ë³„ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë” ì„¸ë¶„í™”í•˜ì—¬ ê´€ë¦¬í•©ë‹ˆë‹¤ (ì˜ˆ: `components/meeting/`, `components/auth/`, `components/layout/`). ì´ëŠ” ì½”ë“œì˜ ì‘ì§‘ë„ë¥¼ ë†’ì´ê³  ì¬ì‚¬ìš©ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.
*   **í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬:**
    *   Next.jsì˜ í™˜ê²½ ë³€ìˆ˜ ê·œì¹™(`NEXT_PUBLIC_` ì ‘ë‘ì‚¬)ì„ ëª…í™•íˆ ì´í•´í•˜ê³  ì ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸/ì„œë²„ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¦¬í•©ë‹ˆë‹¤.

### 4. ê³µí†µ ì¸í”„ë¼ ë° ê°œë°œ í”„ë¡œì„¸ìŠ¤ ê°œì„ 

*   **CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•:**
    *   GitHub Actions, GitLab CI, Jenkins ë“± CI/CD ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ í‘¸ì‹œ ì‹œ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰, ë¦°íŒ…, ë¹Œë“œ, ë°°í¬ë¥¼ ìë™í™”í•©ë‹ˆë‹¤. ì´ëŠ” ì½”ë“œ í’ˆì§ˆì„ ìœ ì§€í•˜ê³  ë°°í¬ í”„ë¡œì„¸ìŠ¤ì˜ ì•ˆì •ì„±ì„ í™•ë³´í•˜ëŠ” ë° í•„ìˆ˜ì ì…ë‹ˆë‹¤.
*   **ì»¨í…Œì´ë„ˆí™” (Docker):**
    *   `api` ë° `web` ì• í”Œë¦¬ì¼€ì´ì…˜ ê°ê°ì— ëŒ€í•œ `Dockerfile`ì„ ì‘ì„±í•˜ì—¬ ì»¨í…Œì´ë„ˆí™”í•©ë‹ˆë‹¤.
    *   ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— `docker-compose.yml` íŒŒì¼ì„ êµ¬ì„±í•˜ì—¬ ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤, ë°±ì—”ë“œ, í”„ë¡ íŠ¸ì—”ë“œë¥¼ í•œ ë²ˆì— ì‰½ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì´ëŠ” ê°œë°œ í™˜ê²½ ì„¤ì •ì˜ ì¼ê´€ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.
*   **í…ŒìŠ¤íŒ… ì „ëµ ê°•í™”:**
    *   **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸:** ì„œë¹„ìŠ¤ ë¡œì§, ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë“± ê°œë³„ ë‹¨ìœ„ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ë¥¼ ë†’ì…ë‹ˆë‹¤.
    *   **í†µí•© í…ŒìŠ¤íŠ¸:** API ì—”ë“œí¬ì¸íŠ¸, ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ë“± ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ ê°„ì˜ ìƒí˜¸ì‘ìš©ì„ ê²€ì¦í•˜ëŠ” í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
    *   **E2E í…ŒìŠ¤íŠ¸:** Playwright ë˜ëŠ” Cypressì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ì˜ ì—”ë“œíˆ¬ì—”ë“œ í…ŒìŠ¤íŠ¸ë¥¼ êµ¬í˜„í•˜ì—¬ í•µì‹¬ ì‚¬ìš©ì íë¦„ì˜ ì•ˆì •ì„±ì„ í™•ë³´í•©ë‹ˆë‹¤.
*   **ì½”ë“œ í’ˆì§ˆ ë„êµ¬:**
    *   ESLint, Prettier ì„¤ì •ì„ ëª¨ë“  í”„ë¡œì íŠ¸ì— ì¼ê´€ë˜ê²Œ ì ìš©í•˜ê³ , Git Hooks (ì˜ˆ: Husky)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¤ë°‹ ì „ì— ìë™ìœ¼ë¡œ ë¦°íŒ… ë° í¬ë§·íŒ…ì„ ì‹¤í–‰í•˜ë„ë¡ í•©ë‹ˆë‹¤.
    *   TypeScriptì˜ ì—„ê²©í•œ ëª¨ë“œë¥¼ í™œì„±í™”í•˜ê³ , ê°€ëŠ¥í•œ í•œ ë§ì€ íƒ€ì… ì •ë³´ë¥¼ ëª…ì‹œí•˜ì—¬ ì½”ë“œì˜ ì•ˆì •ì„±ì„ ë†’ì…ë‹ˆë‹¤.

ì´ëŸ¬í•œ ê°œì„  ì‚¬í•­ë“¤ì„ ì ìš©í•˜ë©´ í”„ë¡œì íŠ¸ì˜ ìœ ì§€ë³´ìˆ˜ì„±, í™•ì¥ì„±, ì•ˆì •ì„±ì´ í¬ê²Œ í–¥ìƒë  ê²ƒì…ë‹ˆë‹¤.
---
# AI-Meet í”„ë¡œì íŠ¸ ì‹œìŠ¤í…œ ë¬¸ì„œ

> ì´ ë¬¸ì„œëŠ” AIê°€ í”„ë¡œì íŠ¸ì˜ ì•„í‚¤í…ì²˜ì™€ UI ì „ì²´ë¥¼ ë¹ ë¥´ê²Œ ì´í•´í•˜ê¸° ìœ„í•´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
> ë‹¤ìŒ ë°©ë¬¸ ì‹œ ì´ ë¬¸ì„œë¶€í„° ì½ìœ¼ë©´ í”„ë¡œì íŠ¸ì˜ ì „ì²´ ê·¸ë¦¼ì„ í•œ ë²ˆì— íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“Š ì‹œìŠ¤í…œ ê°œìš”

### í•µì‹¬ ì›ì¹™
- **ì•„í‚¤í…ì²˜**: Next.js (Client Island) â†” WebSocket (Socket.IO) â†” NestJS (Backend) â†” Supabase (Auth)
- **ì‹¤ì‹œê°„ í†µì‹ **: WebRTC (Peer-to-Peer) ê¸°ë°˜, WebSocketì„ í†µí•œ ì‹œê·¸ë„ë§ ì„œë²„ ìš´ì˜
- **UI**: Next.js (App Router), shadcn/ui, Tailwind CSS
- **ì¸ì¦**: Supabase Auth (JWT ê¸°ë°˜), WebSocket ì—°ê²° ì‹œ í† í° ì¸ì¦
- **ê°œë°œ í™˜ê²½**: pnpm Workspaceë¥¼ ì‚¬ìš©í•œ ëª¨ë…¸ë ˆí¬

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### 1. ë°ì´í„° íë¦„ (ì¤‘ìš”!)

```
Next.js Client (meeting-client.tsx)
    â”œâ”€ Supabase í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë¡œê·¸ì¸, JWT(Access Token) íšë“
    â””â”€ íšë“í•œ í† í°ì„ auth.tokenì— ë‹´ì•„ WebSocket ì—°ê²° ìš”ì²­
    â†“
NestJS Backend (events.gateway.ts)
    â”œâ”€ @UseGuards(SupabaseAuthGuard) - ì—°ê²° ì‹œë„ ê°€ë¡œì±„ê¸°
    â”œâ”€ SupabaseAuthGuard
    â”‚   â”œâ”€ íŒŒì¼: src/auth/supabase-auth.guard.ts
    â”‚   â”œâ”€ ì—­í• : í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ JWTì˜ ìœ íš¨ì„± ê²€ì¦
    â”‚   â””â”€ ì„±ê³µ ì‹œ: JWT payloadë¥¼ ë””ì½”ë”©í•˜ì—¬ socket ê°ì²´ì— `user`ë¡œ ì €ì¥
    â””â”€ ì—°ê²° ìŠ¹ì¸
    â†“
WebSocket ì´ë²¤íŠ¸ ì²˜ë¦¬ (events.gateway.ts)
    â”œâ”€ ì´ë²¤íŠ¸: 'join-room', 'offer', 'answer', 'ice-candidate' ë“±
    â”œâ”€ ì—­í• : WebRTC ì‹œê·¸ë„ë§ ë©”ì‹œì§€ë¥¼ íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì¤‘ê³„
    â””â”€ ìƒíƒœ ê´€ë¦¬: ì ‘ì† ì¤‘ì¸ ìœ ì €ì™€ ë£¸ ì •ë³´ë¥¼ `roomToUsers` Mapìœ¼ë¡œ ê´€ë¦¬
    â†“
WebRTC P2P í†µì‹ 
    â”œâ”€ í´ë¼ì´ì–¸íŠ¸ ê°„ ì§ì ‘ ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼(ì˜ìƒ/ìŒì„±) êµí™˜
    â””â”€ STUN ì„œë²„ ì‚¬ìš© (stun:stun.l.google.com:19302)
```

### 2. ë°±ì—”ë“œ API êµ¬ì¡°

- **ì£¼ í†µì‹  ë°©ì‹**: REST API ëŒ€ì‹  WebSocket ì‚¬ìš©
- **`EventsGateway` (src/events/events.gateway.ts)**: ëª¨ë“  ì‹¤ì‹œê°„ ë¡œì§ì˜ ì¤‘ì‹¬
    - `handleConnection`: í´ë¼ì´ì–¸íŠ¸ ì ‘ì† ì²˜ë¦¬ ë° ë¡œê·¸
    - `handleDisconnect`: í´ë¼ì´ì–¸íŠ¸ ì ‘ì† í•´ì œ ì²˜ë¦¬, `leaveRoom` í˜¸ì¶œ
    - `@SubscribeMessage('join-room')`: ìœ ì €ê°€ ë£¸ì— ì°¸ì—¬í–ˆì„ ë•Œì˜ ë¡œì§ ì²˜ë¦¬
    - `@SubscribeMessage('offer', 'answer', ...)`: WebRTC ì‹œê·¸ë„ë§ ë©”ì‹œì§€ ì¤‘ê³„

### 3. í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

- **`meeting-client.tsx`**: ë¯¸íŒ…ë£¸ì˜ ëª¨ë“  ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” í•µì‹¬ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸
    - `useEffect`: ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ `initialize` í•¨ìˆ˜ í˜¸ì¶œ
    - `initialize`: Supabase ì„¸ì…˜ í™•ì¸, WebSocket ì—°ê²° ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    - `createPeerConnection`: ìƒˆë¡œìš´ ì°¸ì—¬ìë¥¼ ìœ„í•œ RTCPeerConnection ê°ì²´ ìƒì„± ë° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì„¤ì •
    - ìƒíƒœ ê´€ë¦¬: `useState`ì™€ `useRef`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì°¸ì—¬ì ëª©ë¡, ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼, ì†Œì¼“, PeerConnection ë“± ê´€ë¦¬

---

## ğŸ¨ UI ë ˆì´ì•„ì›ƒ

### ê¸°ë³¸ êµ¬ì¡° (layout.tsx)

```
<html lang="en">
  <body>
    <Header />
    <main className="container mx-auto p-4">
      {children}
    </main>
  </body>
</html>
```

- **Header**: ëª¨ë“  í˜ì´ì§€ ìƒë‹¨ì— í‘œì‹œë˜ëŠ” ê³µí†µ í—¤ë” (`@/components/header.tsx`)
- **main**: í˜ì´ì§€ì˜ ì‹¤ì œ ì½˜í…ì¸ ê°€ ë Œë”ë§ë˜ëŠ” ì˜ì—­. `container`, `mx-auto` í´ë˜ìŠ¤ë¡œ ì¤‘ì•™ ì •ë ¬ ë° ìµœëŒ€ ë„ˆë¹„ ì œí•œ.

---

## ğŸ” ì¸ì¦ ì²˜ë¦¬

### ì¸ì¦ íë¦„

1.  **ë¡œê·¸ì¸**: ì‚¬ìš©ìê°€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Supabase Auth UIë¥¼ í†µí•´ ë¡œê·¸ì¸.
2.  **í† í° íšë“**: `@supabase/auth-helpers-nextjs` ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¸ì…˜ê³¼ JWT(Access Token)ë¥¼ ìë™ìœ¼ë¡œ ê´€ë¦¬.
3.  **ì›¹ì†Œì¼“ ì—°ê²°**: `meeting-client.tsx`ì—ì„œ ì›¹ì†Œì¼“ ì—°ê²° ì‹œ, `socket.auth.token`ì— í˜„ì¬ ì„¸ì…˜ì˜ Access Tokenì„ ë‹´ì•„ ë³´ëƒ„.
4.  **ì„œë²„ ì¸¡ ê°€ë“œ**: `SupabaseAuthGuard`ê°€ ì—°ê²° ìš”ì²­ì„ ê°€ë¡œì±„ `auth.token`ì˜ ìœ íš¨ì„±ì„ ê²€ì¦.
    - **ê²€ì¦ ë¡œì§**: `jsonwebtoken.verify()`ë¥¼ ì‚¬ìš©í•˜ì—¬ `SUPABASE_JWT_SECRET`ìœ¼ë¡œ ì„œëª…ì„ í™•ì¸.
    - **ì„±ê³µ**: ë””ì½”ë”©ëœ payload(ìœ ì € ì •ë³´)ë¥¼ `socket['user']`ì— ì €ì¥ í›„ ì—°ê²° í—ˆìš©.
    - **ì‹¤íŒ¨**: ì—°ê²° ê±°ë¶€.
5.  **ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬**: `handleJoinRoom` ë“± ê° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œëŠ” `socket['user'].sub`ë¥¼ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìì˜ IDë¥¼ ì‹ ë¢°í•˜ê³  ì‚¬ìš©.

### ê´€ë ¨ íŒŒì¼

| ìœ„ì¹˜ | íŒŒì¼ | ì—­í•  |
|------|------|------|
| ë°±ì—”ë“œ | `src/auth/supabase-auth.guard.ts` | ì›¹ì†Œì¼“ ì—°ê²° ì‹œ JWT ê²€ì¦ ê°€ë“œ |
| í”„ë¡ íŠ¸ì—”ë“œ | `src/app/meeting/[roomId]/meeting-client.tsx` | í† í°ì„ ë‹´ì•„ ì›¹ì†Œì¼“ ì—°ê²° ìš”ì²­ |
| í”„ë¡ íŠ¸ì—”ë“œ | `src/app/login/page.tsx` | Supabase UIë¥¼ ì‚¬ìš©í•œ ë¡œê·¸ì¸ í˜ì´ì§€ |

---

## ğŸ“Œ ë¼ìš°íŒ… ì •ì±… (middleware.ts)

- **íŒŒì¼**: `ai-meet/apps/web/middleware.ts`
- **ì—­í• **: íŠ¹ì • í˜ì´ì§€ ì ‘ê·¼ ì œì–´

### ê·œì¹™

1.  **ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ `/login` í˜ì´ì§€ ì ‘ê·¼ ì‹œ**:
    - ë©”ì¸ í˜ì´ì§€(`/`)ë¡œ ë¦¬ë””ë ‰ì…˜.
2.  **ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìê°€ `/meeting/*` í˜ì´ì§€ ì ‘ê·¼ ì‹œ**:
    - ë¡œê·¸ì¸ í˜ì´ì§€(`/login`)ë¡œ ë¦¬ë””ë ‰ì…˜.

```ts
// src/apps/web/middleware.ts

export const config = {
  matcher: ['/meeting/:path*', '/login'],
};
```

---

## ğŸš€ ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ë° íŒŒì¼ ì°¸ì¡°

| êµ¬ë¶„ | íŒŒì¼ ê²½ë¡œ | ì—­í•  |
|------|-----------|------|
| **ë°±ì—”ë“œ** | | |
| ê²Œì´íŠ¸ì›¨ì´ | `apps/api/src/events/events.gateway.ts` | ì›¹ì†Œì¼“ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬, WebRTC ì‹œê·¸ë„ë§ ë¡œì§ |
| ì¸ì¦ ê°€ë“œ | `apps/api/src/auth/supabase-auth.guard.ts` | ì›¹ì†Œì¼“ ì—°ê²° ì‹œ JWT ì¸ì¦ ì²˜ë¦¬ |
| ëª¨ë“ˆ | `apps/api/src/events/events.module.ts` | ê²Œì´íŠ¸ì›¨ì´ì™€ `ConfigModule`ì„ ì—°ê²° |
| ë©”ì¸ ëª¨ë“ˆ | `apps/api/src/app.module.ts` | NestJS ì•±ì˜ ë£¨íŠ¸ ëª¨ë“ˆ, ì „ì—­ ì„¤ì • |
| **í”„ë¡ íŠ¸ì—”ë“œ** | | |
| ë©”ì¸ í´ë¼ì´ì–¸íŠ¸ | `apps/web/app/meeting/[roomId]/meeting-client.tsx` | ë¯¸íŒ…ë£¸ì˜ ëª¨ë“  UIì™€ ì‹¤ì‹œê°„ ë¡œì§ ë‹´ë‹¹ |
| í˜ì´ì§€ | `apps/web/app/meeting/[roomId]/page.tsx` | `meeting-client.tsx`ë¥¼ ë Œë”ë§í•˜ëŠ” RSC |
| ë¼ìš°íŒ… ë¯¸ë“¤ì›¨ì–´ | `apps/web/middleware.ts` | ì¸ì¦ ê¸°ë°˜ í˜ì´ì§€ ì ‘ê·¼ ì œì–´ |
| ë©”ì¸ ë ˆì´ì•„ì›ƒ | `apps/web/app/layout.tsx` | ê³µí†µ UI êµ¬ì¡° (í—¤ë”, ë©”ì¸ ì˜ì—­) |
| í—¤ë” | `apps/web/components/header.tsx` | ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¥¸ UI ë³€ê²½ ë° ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ |
| í™ˆí˜ì´ì§€ | `apps/web/app/page.tsx` | ë¯¸íŒ… ìƒì„± ë° ì°¸ì—¬ UI |

---

## âš™ï¸ í™˜ê²½ ë³€ìˆ˜

### ë°±ì—”ë“œ (`apps/api/.env`)

| ë³€ìˆ˜ëª… | ì„¤ëª… |
|---|---|
| `PORT` | API ì„œë²„ê°€ ì‹¤í–‰ë  í¬íŠ¸ (ì˜ˆ: 3001) |
| `SUPABASE_JWT_SECRET` | Supabase í”„ë¡œì íŠ¸ì˜ JWT Secret. í† í° ê²€ì¦ì— í•„ìˆ˜. |

### í”„ë¡ íŠ¸ì—”ë“œ (`apps/web/.env.local`)

| ë³€ìˆ˜ëª… | ì„¤ëª… |
|---|---|
| `NEXT_PUBLIC_SUPABASE_URL` | Supabase í”„ë¡œì íŠ¸ URL |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | Supabase í”„ë¡œì íŠ¸ì˜ `anon` public í‚¤ |
| `NEXT_PUBLIC_WEBSOCKET_URL` | ì—°ê²°í•  ë°±ì—”ë“œ API ì„œë²„ì˜ ì£¼ì†Œ (ì˜ˆ: `http://localhost:3001` ë˜ëŠ” ngrok ì£¼ì†Œ) |
